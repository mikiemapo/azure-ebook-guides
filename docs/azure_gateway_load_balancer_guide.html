html_content = """<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Gateway Load Balancer Deep Dive (AZ-104)</title>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --azure-blue: #0078d4;
            --azure-blue-dark: #005a9e;
            --azure-bg-light: #f0f4f8;
            --text-dark: #323130;
            --text-light: #ffffff;
            --border-color: #d1d1d1;
            --card-bg: #ffffff;
            --diagram-bg: #f8f9fa;
            --success-color: #107c10;
            --warning-color: #d83b01;
            --info-color: #005a9e;
            --shadow-color: rgba(0, 0, 0, 0.1);
            /* Feature Colors for Gateway Load Balancer Guide */
            --gwlb-main-color: #9C27B0; /* Deep Purple for GWLB focus */
            --definition-color: #E74C3C; /* Red */
            --deployment-color: #34495E; /* Dark Grey */
            --standard-lb-color: #0078d4; /* Azure Blue for Standard LB context */
            --nva-color: #27AE60; /* Green for NVA */
            --chaining-color: #F39C12; /* Orange for Chaining */
            --use-cases-color: #8E44AD; /* Purple for Use Cases */
            --lab-review-color: #4CAF50; /* Green for lab review */
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--azure-bg-light); margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
            color: var(--text-dark);
            line-height: 1.6; 
        }

        .main-container { width: 100%; max-width: 1000px; }

        h1 {
            color: var(--gwlb-main-color); margin-bottom: 15px; text-align: center;
            font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        h1 .fa-route { font-size: 1.1em; } 
        
        .back-to-hub-container { 
            width: 100%; max-width: 1000px; margin: 0 auto 20px auto; 
            padding: 0 20px; box-sizing: border-box;
        }
        .back-to-hub {
            padding: 10px; background-color: #e6f2ff; border-radius: 5px; text-align: left;
            border: 1px solid var(--azure-blue);
        }
        .back-to-hub a { text-decoration: none; color: #005a9e; font-weight: bold; font-size: 1.1em; }
        .back-to-hub a i { margin-right: 8px; }

        .instructions {
            background-color: var(--card-bg); padding: 12px 18px; border-radius: 6px;
            margin-bottom: 25px; text-align: center; font-size: 0.95em;
            border: 1px solid var(--border-color); box-shadow: 0 1px 3px var(--shadow-color);
        }
        .instructions strong { color: var(--gwlb-main-color); }

        .card-container { display: grid; grid-template-columns: 1fr; gap: 20px; width: 100%; }
        @media (min-width: 768px) { .card-container { grid-template-columns: repeat(2, 1fr); } }

        .card {
            background-color: var(--card-bg); border-radius: 6px; box-shadow: 0 2px 5px var(--shadow-color);
            overflow: hidden; border: 1px solid var(--border-color); transition: box-shadow 0.3s ease;
            display: flex; flex-direction: column;
        }
        .card:hover { box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); }
        .card-toggle { display: none; } 

        .card-header {
            display: flex; justify-content: space-between; align-items: center; padding: 12px 18px;
            color: var(--text-light); cursor: pointer;
            transition: background-color 0.2s ease; border-bottom: 1px solid;
            background-color: var(--gwlb-main-color);
            border-bottom-color: #791e87;
        }
        .card-header:hover { background-color: #791e87; }
        .card-header.summary-header { /* For the final summary card */
            background-color: var(--azure-blue-dark); 
            border-bottom-color: #004578;
        }
        .card-header.summary-header:hover { background-color: #004578; }

        /* Specific card header colors */
        .card-header.lab-review-header { background-color: var(--lab-review-color); border-bottom-color: #388e3c; }
        .card-header.lab-review-header:hover { background-color: #388e3c; }
        .card-header.standard-lb-header { background-color: var(--standard-lb-color); border-bottom-color: #005a9e; }
        .card-header.standard-lb-header:hover { background-color: #005a9e; }
        .card-header.nva-header { background-color: var(--nva-color); border-bottom-color: #1a7e43; }
        .card-header.nva-header:hover { background-color: #1a7e43; }
        .card-header.chaining-header { background-color: var(--chaining-color); border-bottom-color: #c47c0f; }
        .card-header.chaining-header:hover { background-color: #c47c0f; }
        .card-header.use-cases-header { background-color: var(--use-cases-color); border-bottom-color: #6e378c; }
        .card-header.use-cases-header:hover { background-color: #6e378c; }


        .card-header h2 { margin: 0; font-size: 1.2em; font-weight: 600; display: flex; align-items: center; gap: 8px;}
        .card-header h2 i { font-size: 1em; opacity: 0.9;}
        .card-header .toggle-icon { font-size: 1.1em; transition: transform 0.3s ease; }
 
        .card-content {
            max-height: 0; opacity: 0; overflow: hidden; 
            padding: 0 18px; 
            transition: max-height 0.4s ease-out, opacity 0.3s ease-in, padding 0.4s ease-out, border-top 0.4s ease-out;
            background-color: var(--card-bg); 
            border-top: 0px solid var(--border-color);
            flex-grow: 1;
        }

        .card-toggle:checked + .card-header { border-bottom-color: transparent; }
        .card-toggle:checked + .card-header .toggle-icon { transform: rotate(180deg); }
        .card-toggle:checked ~ .card-content {
            max-height: 2000px; /* Adjusted for content */
            opacity: 1;
            padding: 15px 18px; 
            border-top: 1px solid var(--border-color); 
            overflow-y: auto;
        }

        .card-content h3, .card-content h4 {
             color: var(--azure-blue-dark); margin-top: 15px; margin-bottom: 10px; font-size: 1.1em;
             font-weight: 600; padding-bottom: 6px;
             display: flex; align-items: center; gap: 8px;
         }
        .card-content h3 { border-bottom: 1px solid #eee; font-size: 1.15em; margin-top: 0;}
        .card-content ul { font-size: 0.95em; padding-left: 0; margin-top: 5px; margin-bottom: 15px; list-style: none; }
        .card-content li { margin-bottom: 8px; position: relative; padding-left: 25px; }
        .card-content li i.fa-li {
              position: absolute; left: 0; top: 3px; width: 20px; text-align: center;
              font-size: 0.9em; color: var(--gwlb-main-color); /* Default icon color */
          }
        
        .key-point { font-weight: 600; color: var(--gwlb-main-color); } 
        .description { font-style: italic; color: #605e5c; margin-bottom: 15px; display: block; }
        code, .code-term {
            font-family: "Consolas", "Courier New", monospace; background-color: #eef1f5;
            padding: 0.1em 0.4em; border-radius: 3px; font-size: 0.9em;
            border: 1px solid #ddd; color: var(--azure-blue-dark); 
        }
        
        .important-note { background-color: #fcebeb; border-left: 4px solid var(--gwlb-main-color); padding: 10px 15px; margin: 15px 0; font-size: 0.9em; }
        .important-note i { color: var(--gwlb-main-color); margin-right: 8px; }

        /* Custom styling for sub-headings */
        .card-content h4.sub-heading {
            color: var(--azure-blue-dark);
            font-size: 1em;
            margin-top: 10px;
            margin-bottom: 5px;
            padding-bottom: 3px;
            border-bottom: 1px dotted #ccc;
        }
        .card-content h4.sub-heading i {
            color: var(--azure-blue-dark);
            font-size: 0.9em;
            margin-right: 5px;
        }

        .definition-icon { color: var(--definition-color); }
        .deployment-icon { color: var(--deployment-color); }
        .standard-lb-icon { color: var(--standard-lb-color); }
        .gwlb-icon { color: var(--gwlb-main-color); }
        .nva-icon { color: var(--nva-color); }
        .chaining-icon { color: var(--chaining-color); }
        .use-cases-icon { color: var(--use-cases-color); }
        
        /* For lab review card-specific icons */
        .lab-review-card li i.fa-li { color: var(--lab-review-color); }

    </style>
</head>
<body>
    <div class="back-to-hub-container">
        <div class="back-to-hub">
            <a href="index.html"><i class="fas fa-arrow-left"></i>Back to Study Hub</a>
        </div>
    </div>

    <div class="main-container">
        <h1><i class="fas fa-route"></i>Azure Gateway Load Balancer Deep Dive</h1>
        <p class="instructions">Understand Azure Gateway Load Balancer (GWLB): A specialized Layer 3/4 service for transparently inserting and scaling third-party Network Virtual Appliances (NVAs) inline with your network traffic. Critical for AZ-104 security designs.</p>
        
        <div class="card-container">

            <!-- Card 1: What is Azure Gateway Load Balancer? -->
            <div class="card">
                <input type="checkbox" id="what-is-gwlb-toggle" class="card-toggle" checked> 
                <label for="what-is-gwlb-toggle" class="card-header">
                    <h2><i class="fas fa-question-circle"></i>What is GWLB?</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-bullseye definition-icon"></i>Definition & Purpose:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-network-wired"></i>A <span class="key-point">specialized Layer 3/4 network load balancer</span> that allows you to transparently deploy and scale Network Virtual Appliances (NVAs) inline with your application traffic.</li>
                        <li><i class="fa-li fas fa-plug"></i>It's designed to <span class="key-point">insert service chains of NVAs</span> (e.g., firewalls, intrusion detection/prevention systems) in the path of inbound or outbound traffic.</li>
                        <li><i class="fa-li fas fa-cogs"></i>Ensures <span class="key-point">symmetric flow</span>, meaning traffic flows through the same NVA for both inbound and return paths, which is critical for stateful appliances.</li>
                        <li><i class="fa-li fas fa-shield-alt"></i>Preserves the <span class="key-point">source IP address</span> of the client, allowing backend applications and NVAs to see the original client's IP.</li>
                    </ul>

                    <h4 class="sub-heading"><i class="fas fa-star definition-icon"></i>Key Characteristics:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-random"></i>**Transparent Insertion:** Appliances are inserted without requiring manual routing changes on application subnets.</li>
                        <li><i class="fa-li fas fa-balance-scale-left"></i>**Scalable:** Automatically scales NVAs behind it based on load and health.</li>
                        <li><i class="fa-li fas fa-undo-alt"></i>**Symmetric Flow:** Guarantees that request and response packets for a given flow traverse the same NVA instance.</li>
                        <li><i class="fa-li fas fa-map-pin"></i>**Regional Service:** Operates within a single Azure region.</li>
                        <li><i class="fa-li fas fa-project-diagram"></i>**Topology Placement:** Typically deployed inline with a public-facing load balancer (Standard LB or Application Gateway) at the application edge, allowing traffic distribution and inspection chaining.</li>
                    </ul>
                </div>
            </div>

            <!-- Card 2: GWLB vs. Standard Azure Load Balancer -->
            <div class="card">
                <input type="checkbox" id="gwlb-vs-stdlb-toggle" class="card-toggle"> 
                <label for="gwlb-vs-stdlb-toggle" class="card-header standard-lb-header">
                    <h2><i class="fas fa-exchange-alt"></i>GWLB vs. Standard LB</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-random standard-lb-icon"></i>Standard Azure Load Balancer (L4):</h4>
                    <ul>
                        <li><i class="fa-li fas fa-share-alt"></i>**Primary Function:** Distributes inbound client requests across a pool of healthy backend servers (e.g., VMs running a web app).</li>
                        <li><i class="fa-li fas fa-filter"></i>**Traffic Handling:** Terminates a client flow and initiates a new one to a backend. Doesn't usually send return traffic back through itself to the *same* client flow path without session affinity.</li>
                        <li><i class="fa-li fas fa-code"></i>**Transparency:** Can perform Source Network Address Translation (SNAT), masking the client's original IP from the backend.</li>
                        <li><i class="fa-li fas fa-route"></i>**NVA Integration:** Requires User-Defined Routes (UDRs) to force traffic through NVAs for inspection, making NVA insertion complex.</li>
                    </ul>

                    <h4 class="sub-heading"><i class="fas fa-route gwlb-icon"></i>Gateway Load Balancer (L3/4):</h4>
                    <ul>
                        <li><i class="fa-li fas fa-bullseye"></i>**Primary Function:** Inserts a chain of NVAs transparently for inspection *before* traffic reaches its final destination.</li>
                        <li><i class="fa-li fas fa-sync-alt"></i>**Traffic Handling:** Acts as a transparent proxy. It doesn't terminate the client connection; it steers packets through NVAs and then back to the original destination, ensuring <span class="key-point">symmetric flow</span>.</li>
                        <li><i class="fa-li fas fa-user-shield"></i>**Transparency:** Preserves the <span class="key-point">original client IP</span> for the backend, and for the NVAs themselves, which is vital for security logging and policy enforcement.</li>
                        <li><i class="fa-li fas fa-link"></i>**NVA Integration:** Simplifies NVA insertion via <span class="key-point">Chaining</span>. NVAs are simply added to its backend pool.</li>
                    </ul>
                    <p class="important-note">
                        <i class="fas fa-info-circle"></i>**AZ-104 Focus:** Understand that Standard LB *distributes* traffic, while GWLB *inserts* inspection services *transparently* into the traffic path. GWLB is a specialized tool for NVAs.
                    </p>
                </div>
            </div>

            <!-- Card 3: Key Components & Deployment -->
            <div class="card">
                <input type="checkbox" id="components-deployment-toggle" class="card-toggle"> 
                <label for="components-deployment-toggle" class="card-header deployment-color">
                    <h2><i class="fas fa-tools"></i>Components & Deployment</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-sitemap deployment-icon"></i>Key Components:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-globe"></i>**Frontend IP Configuration:** The public IP address that receives incoming traffic intended for inspection. Can also be internal.</li>
                        <li><i class="fa-li fas fa-server"></i>**Backend Pool:** Contains the network interfaces of your Network Virtual Appliances (NVAs).</li>
                        <li><i class="fa-li fas fa-heartbeat"></i>**Health Probes:** Monitors the health and availability of the NVA instances in the backend pool. Critical for automatic failover.</li>
                        <li><i class="fa-li fas fa-gavel"></i>**Load Balancing Rules:** Define how incoming traffic on the frontend is distributed to the backend NVAs.</li>
                    </ul>

                    <h4 class="sub-heading"><i class="fas fa-cloud-upload-alt deployment-icon"></i>Deployment Considerations:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-project-diagram"></i>**Inline Deployment:** GWLB is deployed logically in front of, or behind, the consuming load balancer (e.g., a Standard Public LB or Application Gateway).</li>
                        <li><i class="fa-li fas fa-network-wired"></i>**Dedicated NVAs:** Each NVA needs to be specifically configured to act as a GWLB backend, often involving specific NVA images or configurations from vendors.</li>
                        <li><i class="fa-li fas fa-project-diagram"></i>**Topology Context:** In most architectures, GWLB sits in a **hub-and-spoke model** or directly in front of a Standard LB or Application Gateway, ensuring that all ingress/egress traffic is inspected inline.</li>
                    </ul>
                </div>
            </div>

            <!-- Card 4: Network Virtual Appliances (NVAs) -->
            <div class="card">
                <input type="checkbox" id="nva-card-toggle" class="card-toggle"> 
                <label for="nva-card-toggle" class="card-header nva-header">
                    <h2><i class="fas fa-microchip"></i>Network Virtual Appliances (NVAs)</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-firewall nva-icon"></i>Role of NVAs with GWLB:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-filter"></i>NVAs are virtual machines (or VM Scale Sets) running specialized network functions, such as firewalls, intrusion detection/prevention systems (IDS/IPS), WAN optimizers, or packet sniffers.</li>
                        <li><i class="fa-li fas fa-cogs"></i>When an NVA is placed in a GWLB's backend pool, all traffic flows through it for inspection, policy enforcement, or logging.</li>
                        <li><i class="fa-li fas fa-database"></i>**Source IP Preservation:** NVAs typically need to see the original client IP to apply granular security policies or generate accurate logs. GWLB facilitates this.</li>
                    </ul>
                    <p class="important-note">
                        <i class="fas fa-info-circle"></i>**Example:** If you have an application that receives traffic from the internet, you can chain a GWLB (with a backend pool of firewall NVAs) to your public-facing Load Balancer or Application Gateway. Internet traffic first hits the public LB, then is steered to the GWLB, passes through the firewall NVAs, and then goes to your application backend.
                    </p>
                </div>
            </div>

            <!-- Card 5: Chaining and Traffic Flow -->
            <div class="card">
                <input type="checkbox" id="chaining-toggle" class="card-toggle"> 
                <label for="chaining-toggle" class="card-header chaining-header">
                    <h2><i class="fas fa-link"></i>Chaining & Traffic Flow</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-bezier-curve chaining-icon"></i>How it Works:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-sitemap"></i>**Service Chaining:** This is the process of linking one Azure Load Balancer (e.g., a Standard Public Load Balancer or Application Gateway) to a Gateway Load Balancer.</li>
                        <li><i class="fa-li fas fa-arrow-right"></i>**Entry Point:** The client traffic first hits the frontend of the "primary" load balancer (e.g., `mikeLoadBallancer` in your lab).</li>
                        <li><i class="fa-li fas fa-cogs"></i>**Redirection:** Instead of sending traffic directly to your application's VMs, the primary load balancer is configured to send traffic to the <span class="key-point">frontend IP of the Gateway Load Balancer</span>.</li>
                        <li><i class="fa-li fas fa-filter"></i>**Inspection:** The GWLB then directs this traffic through an NVA in its backend pool (e.g., `mikeNVA`). The NVA performs its inspection/security functions.</li>
                        <li><i class="fa-li fas fa-reply"></i>**Return Path:** After inspection, the NVA sends the traffic back to the GWLB, which then returns it to the primary load balancer. The primary load balancer then forwards it to your application's actual backend servers.</li>
                    </ul>
                    <p class="important-note">
                        <i class="fas fa-info-circle"></i>**Key benefit:** This entire process is transparent to the client and the application servers. The application doesn't need to be aware that traffic is being inspected by an inline NVA.
                    </p>
                </div>
            </div>

            <!-- Card 6: Benefits & Use Cases -->
            <div class="card">
                <input type="checkbox" id="benefits-use-cases-toggle" class="card-toggle"> 
                <label for="benefits-use-cases-toggle" class="card-header use-cases-header">
                    <h2><i class="fas fa-lightbulb"></i>Benefits & Use Cases</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h4 class="sub-heading"><i class="fas fa-check-circle use-cases-icon"></i>Key Benefits:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-cubes"></i>**Centralized NVA Management:** Simplify deployment and scaling of NVAs.</li>
                        <li><i class="fa-li fas fa-user-shield"></i>**Enhanced Security:** All traffic is forced through security appliances for inspection.</li>
                        <li><i class="fa-li fas fa-arrows-alt-h"></i>**Symmetric Flow:** Essential for stateful firewalls and IDS/IPS systems.</li>
                        <li><i class="fa-li fas fa-search"></i>**Source IP Preservation:** Critical for accurate logging, auditing, and policy enforcement at the NVA and application layers.</li>
                    </ul>

                    <h4 class="sub-heading"><i class="fas fa-tools use-cases-icon"></i>Common Use Cases:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-fire-alt"></i>**Advanced Firewalling:** Inserting next-generation firewalls for granular traffic control and threat protection.</li>
                        <li><i class="fa-li fas fa-magnifying-glass-chart"></i>**Intrusion Detection/Prevention (IDS/IPS):** Deploying systems to monitor and block malicious network activity for compliance or advanced threat detection.</li>
                        <li><i class="fa-li fas fa-file-waveform"></i>**Deep Packet Inspection:** For specific compliance requirements or application-level security.</li>
                    </ul>
                </div>
            </div>

            <!-- Card 7: Lab Review: Gateway Load Balancer Setup -->
            <div class="card lab-review-card" style="grid-column: 1 / -1;">
                <input type="checkbox" id="gwlb-lab-review-toggle" class="card-toggle" checked>
                <label for="gwlb-lab-review-toggle" class="card-header lab-review-header">
                    <h2><i class="fas fa-vial"></i>Lab Review: Gateway Load Balancer Setup</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h3><i class="fas fa-tasks"></i>Your Gateway Load Balancer Practical Experience</h3>
                    <p class="description">This lab was key to understanding how Azure Gateway Load Balancer (GWLB) seamlessly integrates third-party Network Virtual Appliances (NVAs) into your traffic flow for inspection, without requiring complex routing changes on your application subnets.</p>

                    <h4 class="sub-heading"><i class="fas fa-cubes"></i>1. Lab Setup & Configuration Highlights:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-network-wired"></i>**VNet & Subnets:** Created `mikeVnet1` with a `myBackendSubnet` for isolation.</li>
                        <li><i class="fa-li fas fa-lock"></i>**Azure Bastion:** Deployed `mikeVnet1-Bastion` (with `mikeBastionHostIP`) for secure RDP/SSH access to VMs, avoiding public IPs on workloads.</li>
                        <li><i class="fa-li fas fa-user-shield"></i>**NSG (`mikeNSG`):** Configured for basic traffic control. In a real scenario, this would be highly restrictive.</li>
                        <li><i class="fa-li fas fa-balance-scale-right"></i>**Standard Load Balancer (`mikeLoadBallancer`):** Set up with a frontend IP (`LB-ip`) to distribute client requests at Layer 4 (TCP/UDP). This was the initial point of entry for client traffic.</li>
                        <li><i class="fa-li fas fa-route"></i>**Gateway Load Balancer (`mikeGWLB`):** The core of the lab, configured with:
                            <ul>
                                <li>**Source IP preservation:** Ensures NVAs see the real client IP.</li>
                                <li>**Symmetric flow:** Guarantees consistent traffic path through the NVA.</li>
                                <li>**Backend Pool:** Where our NVA, `mikeNVA`, was placed.</li>
                                <li>**Health Probe & Load Balancing Rule:** For NVA health monitoring and traffic distribution.</li>
                            </ul>
                        </li>
                        <li><i class="fa-li fas fa-microchip"></i>**Network Virtual Appliance (`mikeNVA`):** Deployed as a VM (`mikenva650_z1`) with a public IP (`mikeNVA-ip`). Its role was to be the "inspection point" in the traffic flow.</li>
                    </ul>

                    <h4 class="sub-heading" style="margin-top:20px;"><i class="fas fa-link"></i>2. Chaining and Validation in Practice:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-sitemap"></i>**Traffic Flow:** The Standard LB (`mikeLoadBallancer`) was configured to forward its frontend traffic to the frontend of the `mikeGWLB`. This is the "chaining" in action.</li>
                        <li><i class="fa-li fas fa-check-circle"></i>**Validation:** By accessing the Standard LB's Public IP in a browser, we confirmed that traffic was transparently routed through the `mikeGWLB` and its `mikeNVA` backend for inspection before reaching the application VM.</li>
                    </ul>
                    <p class="important-note" style="border-left-color: var(--lab-review-color); background-color: #e8f5e9;">
                        <i class="fas fa-info-circle" style="color:var(--lab-review-color);"></i>**Reinforcement:**
                        <br>ðŸ‘‰ Standard LB **distributes** traffic to application backends.
                        <br>ðŸ‘‰ GWLB **inserts** NVAs *transparently* into the traffic path for inspection.
                        <br>ðŸ‘‰ Chaining these allows you to combine distribution with centralized NVA-based security.
                    </p>

                    <h4 class="sub-heading" style="margin-top:20px;"><i class="fas fa-graduation-cap"></i>3. Key Learnings & AZ-104 Exam Points:</h4>
                    <ul>
                        <li><i class="fa-li fas fa-equals"></i>**GWLB = NVA Insertion:** Its unique capability is transparently inserting stateful NVAs without altering application or client IP information.</li>
                        <li><i class="fa-li fas fa-network-wired"></i>**Source IP Preservation:** A critical feature of GWLB for security appliances.</li>
                        <li><i class="fa-li fas fa-recycle"></i>**Symmetric Flow:** Guarantees that request and response traverse the same NVA, essential for stateful devices.</li>
                        <li><i class="fa-li fas fa-code-branch"></i>**Chaining:** Understand how a public-facing load balancer (Standard LB or App Gateway) can feed traffic into a GWLB for inspection.</li>
                        <li><i class="fa-li fas fa-ban"></i>**No Direct Internet Exposure for NVAs (ideally):** While `mikeNVA` had a public IP for management in the lab, in a production chaining setup, the NVAs themselves are often not directly internet-facing; the GWLB handles the public frontend.</li>
                    </ul>
                    <p class="important-note" style="border-left-color: var(--lab-review-color); background-color: #e8f5e9;">
                        <i class="fas fa-lightbulb" style="color:var(--lab-review-color);"></i>**Exam Tip:** Look for scenarios requiring *transparent, scalable insertion of third-party security appliances* that need *source IP preservation* and *symmetric traffic flow*. That's your cue for Azure Gateway Load Balancer.
                    </p>
                </div>
            </div>

            <!-- Final Summary Card -->
            <div class="card" style="grid-column: 1 / -1;">
                <input type="checkbox" id="gwlb-summary-toggle" class="card-toggle" checked>
                <label for="gwlb-summary-toggle" class="card-header summary-header">
                    <h2><i class="fas fa-graduation-cap"></i>Azure Gateway Load Balancer: AZ-104 Key Takeaways</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </label>
                <div class="card-content">
                    <h3><i class="fas fa-check-double"></i>Exam Essentials & Security Principles</h3>
                    <ul>
                        <li><i class="fa-li fas fa-bullseye"></i>**Core Purpose:** Transparently insert and scale third-party Network Virtual Appliances (NVAs) like firewalls or IDS/IPS into network traffic paths.</li>
                        <li><i class="fa-li fas fa-equals"></i>**Key Differentiator:** Unlike a Standard Load Balancer that distributes traffic to application backends, GWLB is specifically for **inserting inspection services** without changing IP addresses or breaking connections.</li>
                        <li><i class="fa-li fas fa-network-wired"></i>**Source IP Preservation:** GWLB maintains the original client IP address, crucial for NVA logging and policy enforcement.</li>
                        <li><i class="fa-li fas fa-sync-alt"></i>**Symmetric Flow:** Guarantees that both directions of a traffic flow pass through the same NVA instance, vital for stateful appliances.</li>
                        <li><i class="fa-li fas fa-link"></i>**Service Chaining:** Can be chained with other load balancers (e.g., Standard Public LB, Application Gateway) to combine traffic distribution with inline inspection.</li>
                        <li><i class="fa-li fas fa-microchip"></i>**NVA Backend Pool:** Houses the network virtual appliances that perform the actual traffic inspection.</li>
                        <li><i class="fa-li fas fa-project-diagram"></i>**Topology Placement:** Typically deployed in a <strong>hub-and-spoke model</strong> or inline with a Standard LB/App Gateway to ensure all ingress/egress traffic passes through NVAs.</li>
                        <li><i class="fa-li fas fa-map-pin"></i>**Regional Service:** Operates within a single Azure region.</li>
                    </ul>
                    <p class="important-note" style="border-left-color: var(--gwlb-main-color); background-color: #fcebeb;">
                        <i class="fas fa-lightbulb" style="color:var(--gwlb-main-color);"></i>**Exam Tip:** Look for scenarios that specifically mention **integrating third-party security appliances**, needing to **preserve client source IP**, or requiring **symmetric traffic handling** for stateful inspection. If "transparent insertion" is key, GWLB is often the answer.
                    </p>
                </div>
            </div>

        </div> <!-- End card-container -->
    </div> <!-- End main-container -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.card-toggle').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => { /* CSS :checked handles expand/collapse */ });
            });
        });
    </script>
</body>
</html>"""

file_name = "azure_gateway_load_balancer_guide.html"
try:
    with open(file_name, "w", encoding="utf-8") as f:
        f.write(html_content)
    print(f"File '{file_name}' created successfully in your current directory.")
except Exception as e:
    print(f"Error creating file '{file_name}': {e}")